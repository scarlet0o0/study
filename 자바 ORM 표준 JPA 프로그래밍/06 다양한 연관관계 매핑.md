# 다양한 연관관계 매핑

<br/>

#### 엔티티의 연관관계 매핑시 주의사항

- 다중성 (일대일인지 일대다 관계인지)
- 단방향, 양방향 (한쪽만 참고하는지 아니면 서로 참조하는지)
- 연관관계의 주인 (양방향 관계시 연관관계의 주인을 선택)

<br/>

#### 다중성

- 다대일
- 일대다
- 일대일
- 다대다 -> 실무에서는 거의 사용하지 않는다.

<br/>

## 다대일

다대일 관계의 반대 방향은 항상 일대다 관계고 데이터베이스 테이블의 일 다 관계에서 외래 키는 항상 다쪽에 있다.

<br/>

## 일대다

일대다 단뱡향 매핑보다는 다대일 양방향 매핑을 사용하자

-> 왠만하면 다대일을 권장

<br/>

## 일대일

#### 특징

- 일대일 관계는 그반대도 일대일 관계다.
- 테이블 관계에서 일대다, 다대일은 항상 다쪽이 외래 키를 가진다. 반면에 일대일 관계는 주 테이블이나 대상 테이블 둘 중 어느 곳이나 외래 키를 가질 수 있다.

<br/>

#### 주테이블에 외래 키

- 객체 지향 개발자들이 선호
- 장점 : 주 테이블이 외래 키를 가지고 있으므로 주 테이블만 확인해도 대상 테이블과 연관관계가 있는지 알 수 있다.

#### 대상 테이블에 외래키

- 데이터베이스 개발자들이 선호
- 테이블 관계를 일대일에서 일대다로 변경할 때 테이블 구조를 그대로 유지할 수 있다.

**일대일 관계 중 대상 테이블에 외래 키가 있는 단방향 관계는 JPA에서 지원하지 않는다.**

<br/>

## 다대다

관계형 데이터베이스는 정규화된 테이블 2개로 다대다 관계를 표현할 수 없다. 그래서 다대다 관계를 일대다, 다대일 관계로 풀어내는 연결 테이블을 사용한다.