# 연관관계 매핑 기초

> 객체의 참조와 테이블의 외래 키를 매핑하는 것이 이장의 목표이다.

<br/>

#### 핵심 키워드

- 방향 : 단방향, 양방향
- 다중성 : 다대일, 일대다, 일대일, 다대다
- 연관관계의 주인

<br/>

## 단방향 연관관계

#### 객체 연관관계 vs 테이블 연관관계

- 객체는 참조로 연관관계를 맺는다.
  - 양방향으로 참조할려면 연관관계를 2개 만들어야 한다.
- 테이블은 외래 키로 연관관계를 맺는다.
  - 언제나 양뱡향이다.

<br/>

#### 연관관계를 맺기 위한 어노테이션

- @ManyToOne : 다대일 관계를 나타내는 어노테이션
  - Optional, fetch(글로벌 페치 전략), cascade(영속성 전이 기능)
- @JoinColumn: 외래키를 매핑할때마다 사용 생략해도 가능(기본값으로 설정됨)

<br/>

#### 연관관계가 있는 엔티티를 조회하는 방법

- 객체 그래프 탐색( 객체 연관관계를 사용한 조회)
- 객체지향 쿼리 사용(JPQL)

<br/>

#### 수정

#### 조회

<br/>

## 양뱡향 연관관계

<br/>

## 연관관계의 주인

양뱡향 연관관계의 경우 테이블은 외래 키 하나로 두 테이블의 연관관계를 관리한다. 하지만 엔티티는 객체의 참조를 두번하므로 양뱡향 연관관계를 관리한다. 외래키는 하나인데 객체의 참조는 두개 이므로 둘사이에 차이가 발생한다. 이런차이를 해결하고자 두 객체의 연관관계 중 하나를 정해서 테이블의 외래키를 관리하는데 이것을 연관관계의 주인이라 한다.

<br/>

**연관관계의 주인만이 데이터베이스 연관관계와 매핑되고 외래 키를 관리(등록, 수정, 삭제)할 수 있다. 반면에 주인이 아닌 쪽은 읽기만 할 수 있다.**



연관관계의 주인은 외래 키가 있는 곳