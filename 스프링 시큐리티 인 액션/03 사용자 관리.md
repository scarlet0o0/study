# 사용자 관리

#### 배우는 내용

- 스프링 시큐리티에서 사용자를 기술하는 UserDetails
- 사용자가 실행할 수 있는 작업을 정의하는 GrantedAuthority
- UserDetailsService 계약을 확장하는 UserDetailsManager. 상속된 동작 외에 사용자 만들기, 사용자의 암호 수정이나 삭제 등의 작업도 지원한다.
- 스프링 시큐리티에 있는 구현과 이를 이용하는 방법
- 계약을 위한 맞춤형 구현을 정의하는 방법과 시기
- 실제 애플리케이션에서 볼 수 있는 인터페이스를 구현하는 방법
- 이러한 인터페이스 이용의 모범 사례

<br/>

<br/>

## 스프링 시큐리티의 인증 구현

사용자 관리를 위해서는 UserDetailsService 및 UserDetailsManager 인터페이스를 이용한다.

- **UserDetailsService**: 사용자 이름으로 사용자를 검색하는 역할만 제공
- **UserDetailsManager**: 사용자 검색뿐만 아닌 사용자 추가, 수정, 삭제 작업을 추가로 제공

이렇게 두개의 인터페이스를 나눈이유는 앱에 필요없는 동작을 구현하도록 강제하지 않기 위해 -> **인터페이스 분리 원칙**

<br/>

#### 사용자 관리를 수행하는 구성 요소 간의 종속성

![userdetails](assets/userdetails-4995771.jpg)<br/>

## 사용자 기술하기

스프링 시큐리티에서 사용자 정의는 UserDetails 계약을 준수해야 한다. UserDetails 계약은 스프링 시큐리티가 이해하는 방식으로 나타낸다. 애플리케이션에서 사용자를 기술하는 클래스는 프레임워크가 이해할 수 있도록 이 인터페이스를 구현해야한다.

<br/>

#### UserDetails 인터페이스

```java
public interface UserDetails extends Serializable {
	Collection<? extends GrantedAuthority> getAuthorities();
	String getPassword(); 
	String etUsername();
	boolean isAccountNonExpired();
	boolean isAccountNonLocked();
	boolean isCredentialsNonExpired();
	boolean isEnabled();
}
```

- 계정만료, 계정 잠금, 자격 증명 만료, 계정 비활성화